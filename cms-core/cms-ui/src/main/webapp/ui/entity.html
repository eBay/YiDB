<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Entity - CMS</title>
    <link href="css/doc.css" media="screen" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="js/jquery-min.js"></script>
    <script type="text/javascript" src="js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="js/highlight.js"></script>
    <style>
        input.submit{
        clear: none;
        display: block;
        float: right;
        padding: 6px 8px;
        }
        h2.menu{
        font-family:"黑体"；
        }
    </style>
</head>
<body>
<div id="container">
<div id='navbar'>
    <a href="home.html"><img src="images/cms_logo.png" height="90pt"></img></a>
    <ul>
        <li>
            <a href='home.html'>home</a> |
        </li>
        <li>
            <a href='console.html'>console</a> |
        </li>
        <li>
            <a href='doc.html'>docs</a>
        </li>
    </ul>
</div>
<div id="leftnav">
    <h2 class="menu">Overview</h2>
    <ul class="navul">
        <li><a href="doc.html">About CMS</a></li>
        <li><a href="metadataoverview.html">Metadata Overview</a></li>
        <li><a href="persistenceoverview.html">Persistence Overview</a></li>
        <li><a href="queryoverview.html">Query Overview</a></li>
    </ul>
    <h2 class="menu">Examples</h2>
    <ul class="navul">
        <li><a href="repository.html">Repository</a></li>
        <li><a href="branch.html">Branch</a></li>
        <li><a href="metadata.html">Metadata</a></li>
        <li><a href="entity.html">Entity</a></li>
        <li><a href="query.html">Query</a></li>
        <li><a href="systemManagement.html">System Management</a></li>
    </ul>
	<h2 class="menu">User Guide</h2>
    <ul class="navul">
        <li><a href="evt.html">Event Dispatcher</a></li>
    </ul>
</div>
<div id="content">
<h1>Entity</h1>
<blockquote><code>git clone
    https://github.com/eBay/YiDB.git</code> to see the
    scripts behind all the
    examples on this site.
</blockquote>

<h2> Query an Entity </h2>

<p>Query all entities based on given metadata.<input type="button"
                                                     value="Try me"
                                                     onClick='window.location.href="console.html?opid=26&reponame=raptor-paas&branch=main&metatype=ApplicationService"'
                                                     class="submit"></p>

<div>
    <pre class="brush: sql; toolbar: false;">GET /repositories/raptor-paas/branches/main/ApplicationService</pre>
</div>

<h2> Create Entity </h2>

<p>Create an entity based on given metadata.<input type="button" value="Try me"
                                                   onClick='window.location.href="console.html?opid=14&reponame=raptor-paas&branch=main&metatype=ApplicationService&reqBody="+
					"{%0A%09%22_type%22:%22ApplicationService%22,%0A%09%22archTier%22:%22app%22,%0A%09%22nugget%22:%22srp%22,%0A%09%22name%22:%22srp-app:Raptor-10%22,%0A%09%22activeManifestDiff%22:true,"+
					"%0A%09%22label%22:%22srp-app-10%22,%0A%09%22activeManifestRef%22:[%0A%09%09%22manifest-2.0%22%0A%09],%0A%09%22activeManifestCur%22:%22manifest-1.0%22%0A}"'
                                                   class="submit"></p>

<div>
			<pre class="brush: sql; toolbar: false;">POST /repositories/raptor-paas/branches/main/ApplicationService

{
	"_type": "ApplicationService",
	"archTier": "app",
	"architecture": "r1",
	"nugget": "srp",
	"name": "srp-app:Raptor-10",
	"activeManifestDiff": true,
	"label": "srp-app-10",
	"activeManifestRef": [
		"manifest-2.0"
	],
	"activeManifestCur": "manifest-1.0"
}</pre>
</div>

<h2> Get Entity </h2>

<p>Query an entity of the given metadata type.<input type="button"
                                                     value="Try me"
                                                     onClick='window.location.href="console.html?opid=13&reponame=raptor-paas&branch=main&metatype=ApplicationService"'
                                                     class="submit"></p>

<div>
    <pre class="brush: sql; toolbar: false;">GET /repositories/raptor-paas/branches/main/ApplicationService/{oid}</pre>
</div>


<h2> Create Entity - expression field</h2>

<p>Create an entity based on given metadata, expression field value will be
    calculated when data is created/updated.<input type="button" value="Try me"
                                                   onClick='window.location.href="console.html?opid=14&reponame=raptor-paas&branch=main&metatype=ServiceInstance&reqBody=%7B%0D%0A%20%20%22port%22%3A%20%228080%22%2C%0D%0A%20%20%22_branch%22%3A%20%22main%22%2C%0D%0A%20%20%22manifestRef%22%3A%20%5B%22manifest-5.0%22%2C%20%22manifest-1.0%22%5D%2C%0D%0A%20%20%22https%22%3A%20false%2C%0D%0A%20%20%22_oid%22%3A%20%22expressionmetadatacreateoid%22%2C%0D%0A%20%20%22name%22%3A%20%22srp-app%3ARaptor-expression-meta%22%2C%0D%0A%20%20%22healthStatus%22%3A%20%22up%22%2C%0D%0A%20%20%22_type%22%3A%20%22ServiceInstance%22%2C%0D%0A%20%20%22activeManifestDiff%22%3A%20true%2C%0D%0A%20%20%22activeManifestRef%22%20%3A%20%5B%22manifest-5.0%22%5D%2C%0D%0A%20%20%22activeManifestCur%22%20%3A%20%22manifest-1.0%22%0D%0A%20%20%0D%0A%7D"'
                                                   class="submit"></p>

<div>
      <pre class="brush: sql; toolbar: false;">POST /repositories/raptor-paas/branches/main/ServiceInstance

{
  "port": "8080",
  "_branch": "main",
  "manifestRef": ["manifest-5.0", "manifest-1.0"],
  "https": false,
  "_oid": "expressionmetadatacreateoid",
  "name": "srp-app:Raptor-expression-meta",
  "healthStatus": "up",
  "_type": "ServiceInstance",
  "activeManifestDiff": true,
  "activeManifestRef" : ["manifest-5.0"],
  "activeManifestCur" : "manifest-1.0"
}</pre>
</div>

<h2> Get Entity -expression field</h2>

<p>Query an entity of the given metadata type.<input type="button"
                                                     value="Try me"
                                                     onClick='window.location.href="console.html?opid=13&reponame=raptor-paas&branch=main&metatype=ServiceInstance&oid=expressionmetadatacreateoid"'
                                                     class="submit"></p>

<div>
    <pre class="brush: sql; toolbar: false;">GET /repositories/raptor-paas/branches/main/ServiceInstance/{oid}</pre>
</div>


<h2> Modify an Entity </h2>

<p>Modify an entity based on given oid.<input type="button" value="Try me"
                                              onClick='window.location.href="console.html?opid=15&reponame=raptor-paas&branch=main&reqBody={"+
					"%0A%09%22archTier%22:%22app%22,%0A%09%22architecture%22:%22r1%22,%0A%09%22services%22:[%0A%09{%0A%09%09%22_oid%22:%224fbb314fc681caf13e283a7a%22,%0A%09%09%22_type%22:%22ServiceInstance%22%0A%09},"+
					"%0A%09{%0A%09%09%22_oid%22:%224fbb314fc681caf13e283a7c%22,%0A%09%09%22_type%22:%22ServiceInstance%22%0A%09},%0A%09{%0A%09%09%22_oid%22:%224fbb314fc681caf13e283a7e%22,%0A%09%09%22_type%22:%22ServiceInstance%22%0A%09},"+
					"%0A%09{%0A%09%09%22_oid%22:%224fbb314fc681caf13e283a80%22,%0A%09%09%22_type%22:%22ServiceInstance%22%0A%09},%0A%09{%0A%09%09%22_oid%22:%224fbb314fc681caf13e283a82%22,%0A%09%09%22_type%22:%22ServiceInstance%22%0A%09},"+
					"%0A%09{%0A%09%09%22_oid%22:%224fbb314fc681caf13e283a84%22,%0A%09%09%22_type%22:%22ServiceInstance%22%0A%09},%0A%09{%0A%09%09%22_oid%22:%224fbb314fc681caf13e283a86%22,%0A%09%09%22_type%22:%22ServiceInstance%22%0A%09},"+
					"%0A%09{%0A%09%09%22_oid%22:%224fbb314fc681caf13e283a88%22,%0A%09%09%22_type%22:%22ServiceInstance%22%0A%09},%0A%09{%0A%09%09%22_oid%22:%224fbb314fc681caf13e283a8a%22,%0A%09%09%22_type%22:%22ServiceInstance%22%0A%09},"+
					"%0A%09{%0A%09%09%22_oid%22:%224fbb314fc681caf13e283a8c%22,%0A%09%09%22_type%22:%22ServiceInstance%22%0A%09}%0A%09]%0A}"'
                                              class="submit"></p>

<div>
			<pre class="brush: sql; toolbar: false;">POST /repositories/raptor-paas/branches/main/ApplicationService/{oid}

{
  "archTier": "app",
  "architecture": "r1",
  "services": [
    {
      "_oid": "4fbb314fc681caf13e283a7a",
      "_type": "ServiceInstance"
    },
    {
      "_oid": "4fbb314fc681caf13e283a7c",
      "_type": "ServiceInstance"
    },
    {
      "_oid": "4fbb314fc681caf13e283a7e",
      "_type": "ServiceInstance"
    },
    {
      "_oid": "4fbb314fc681caf13e283a80",
      "_type": "ServiceInstance"
    },
    {
      "_oid": "4fbb314fc681caf13e283a82",
      "_type": "ServiceInstance"
    },
    {
      "_oid": "4fbb314fc681caf13e283a84",
      "_type": "ServiceInstance"
    },
    {
      "_oid": "4fbb314fc681caf13e283a86",
      "_type": "ServiceInstance"
    },
    {
      "_oid": "4fbb314fc681caf13e283a88",
      "_type": "ServiceInstance"
    },
    {
      "_oid": "4fbb314fc681caf13e283a8a",
      "_type": "ServiceInstance"
    },
    {
      "_oid": "4fbb314fc681caf13e283a8c",
      "_type": "ServiceInstance"
    }
  ]
}</pre>
</div>

<h2> Modify Entity - expression field</h2>

<p>Modify an entity based on given metadata, expression field value will be
    calculated when data is created/updated.<input type="button" value="Try me"
                                                   onClick='window.location.href="console.html?opid=15&reponame=raptor-paas&branch=main&metatype=ServiceInstance&oid=expressionmetadatacreateoid&reqBody=%7B%0D%0A%20%20%22_branch%22%3A%20%22main%22%2C%0D%0A%20%20%22_oid%22%3A%20%22expressionmetadatacreateoid%22%2C%0D%0A%20%20%22_type%22%3A%20%22ServiceInstance%22%2C%0D%0A%20%20%22activeManifestCur%22%20%3A%20%22manifest-5.0%22%2C%0D%0A%20%20%22activeManifestRef%22%20%3A%20%5B%22manifest-5.0%22%5D%0D%0A%20%20%7D%0D%0A%7D"'
                                                   class="submit"></p>

<div>
      <pre class="brush: sql; toolbar: false;">POST /repositories/raptor-paas/branches/main/ServiceInsance/{oid}

{
  "port": "8080",
  "_branch": "main",
  "_oid": "expressionmetadatacreateoid",
  "_type": "ServiceInstance",
  "activeManifestCur" : "manifest-5.0",
  "activeManifestRef" : ["manifest-5.0"]
  }
}</pre>
</div>


<h2> Replace an Entity </h2>

<p>Replace an entity based on given oid.<input type="button" value="Try me"
                                               onClick='window.location.href="console.html?opid=16&reponame=raptor-paas&branch=main&metatype=ApplicationService&reqBody="+
			"{%0A%09%22name%22:%22ralph_appserv%22,%0A%09%22manifestversion%22:%22version 3%22,%0A%09%22applicationId%22:%22n/a-application%22%0A}"'
                                               class="submit"></p>

<div>
			<pre class="brush: sql; toolbar: false;">PUT /repositories/raptor-paas/branches/main/ApplicationService/{oid}

{
  "name": "srp-app:Raptor",
  "_version": 0,
  "archTier": "app",
  "architecture": "r1",
  "nugget": "srp",
  "activeManifestDiff": true,
  "label": "srp-app",
  "activeManifestRef": [
    "manifest-2.0"
  ],
  "activeManifestCur": "manifest-1.0",
  "updateStrategies": [
    {
      "_oid": "4fbb314fc681caf13e283a74",
      "_type": "UpdateStrategy"
    },
    {
      "_oid": "4fbb314fc681caf13e283a75",
      "_type": "UpdateStrategy"
    }
  ],
  "services": [
    {
      "_oid": "4fbb314fc681caf13e283a7a",
      "_type": "ServiceInstance"
    },
    {
      "_oid": "4fbb314fc681caf13e283a7c",
      "_type": "ServiceInstance"
    },
    {
      "_oid": "4fbb314fc681caf13e283a7e",
      "_type": "ServiceInstance"
    },
    {
      "_oid": "4fbb314fc681caf13e283a80",
      "_type": "ServiceInstance"
    },
    {
      "_oid": "4fbb314fc681caf13e283a82",
      "_type": "ServiceInstance"
    },
    {
      "_oid": "4fbb314fc681caf13e283a84",
      "_type": "ServiceInstance"
    },
    {
      "_oid": "4fbb314fc681caf13e283a86",
      "_type": "ServiceInstance"
    },
    {
      "_oid": "4fbb314fc681caf13e283a88",
      "_type": "ServiceInstance"
    },
    {
      "_oid": "4fbb314fc681caf13e283a8a",
      "_type": "ServiceInstance"
    },
    {
      "_oid": "4fbb314fc681caf13e283a8c",
      "_type": "ServiceInstance"
    }
  ]
}</pre>
</div>

<h2> Delete an Entity </h2>

<p>Delete an entity of the given metadata type.<input type="button"
                                                      value="Try me"
                                                      onClick='window.location.href="console.html?opid=17&reponame=raptor-paas&branch=main&metatype=ApplicationService"'
                                                      class="submit"></p>

<div>
    <pre class="brush: sql; toolbar: false;">DELETE /repositories/raptor-paas/branches/main/ApplicationService/{oid}</pre>
</div>

</div>
<div class="footer">
    <div id="footer">
        <p>&copy;2012 eBay CMS System Foundation</p>
    </div>
</div>
</div>
<script type="text/javascript">
    SyntaxHighlighter.all();
</script>
</body>
</html>
